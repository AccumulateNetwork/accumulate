SignatureEntry:
  fields:
  - name: Type
    type: protocol.SignatureType
    marshal-as: enum
  - name: KeyEntryIndex
    type: uint
  - name: SignatureHash
    type: hash

TransactionChainEntry:
  fields:
  - name: Account
    type: url
    marshal-as: reference
    pointer: true
  - name: Chain
    description: is the name of the chain
    type: string
  - name: ChainIndex
    description: is the index of the entry in the chain's index chain
    type: uint
  - name: AnchorIndex
    description: is the index of the entry in the anchor chain's index chain
    type: uint

ChainUpdate:
  fields:
    - name: Account
      type: url
      pointer: true
    - name: Name
      type: string
    - name: Type
      type: protocol.ChainType
      marshal-as: enum
    - name: Index
      type: uint
    - name: SourceIndex
      type: uint
    - name: SourceBlock
      type: uint
    - name: Entry
      type: bytes

BlockStateSynthTxnEntry:
  fields:
  - name: Transaction
    type: bytes
  - name: ChainEntry
    type: uvarint

fullAccountState:
  fields:
  - name: State
    description: is the main state of the account
    type: protocol.Account
    marshal-as: union
  - name: Chains
    description: is the state of the account's chains
    type: chainState
    marshal-as: reference
    pointer: true
    repeatable: true
  - name: Pending
    type: txid
    pointer: true
    repeatable: true
  - name: SyntheticForAnchor
    type: hashAndTxidSet
    marshal-as: reference
    repeatable: true
    pointer: true
  - name: Transactions
    description: is the state of transactions related to the account
    type: fullTransactionState
    marshal-as: reference
    pointer: true
    repeatable: true

fullTransactionState:
  fields:
    - name: Hash
      type: hash
    - name: Value
      type: protocol.Transaction
      marshal-as: reference
      pointer: true
    - name: Status
      type: protocol.TransactionStatus
      marshal-as: reference
      pointer: true
    - name: Produced
      type: txid
      pointer: true
      repeatable: true
    - name: Signatures
      type: signerAndSigSet
      marshal-as: reference
      pointer: true
      repeatable: true

chainState:
  fields:
  - name: Name
    type: string
  - name: Type
    type: protocol.ChainType
    marshal-as: enum
  - name: Count
    type: uint
  - name: Pending
    type: bytes
    repeatable: true
  - name: Entries
    type: bytes
    repeatable: true

hashAndTxidSet:
  fields:
  - name: Anchor
    type: hash
  - name: Txids
    type: txid
    pointer: true
    repeatable: true

signerAndSigSet:
  fields:
  - name: Signer
    type: url
    pointer: true
  - name: Version
    type: uint
  - name: Signatures
    type: SignatureEntry
    marshal-as: reference
    pointer: true
    repeatable: true