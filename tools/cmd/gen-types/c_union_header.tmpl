#pragma once

// GENERATED BY go run ./tools/cmd/gen-types (c_union_header). DO NOT EDIT.
#include <accumulate/encoding/encoding.h>
#include <accumulate/encoding/marshaler.h>
#include <accumulate/protocol/{{snake .Enumeration}}.h>

{{if not (eq .Type "result")}}
typedef struct {
        {{.Enumeration}} Type;
        Bytes data;
} {{.Enumeration}}Union;

typedef union {
        {{.Enumeration}}Union *_u;
        {{- range .Members}}
        struct {{.Name}} *_{{.Name}};
        {{- end}}
} {{.Interface}};

{{- end}}
{{if not (eq .Type "result")}}{{if (index .Members 0).IsBinary}}
int read{{.Interface}}(Unmarshaler *m, {{.Interface}} *v);
{{end}}{{end}}
