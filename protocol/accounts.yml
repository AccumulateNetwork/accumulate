# Accounts - names should be nouns

AccountHeader:
  fields:
  - name: Url
    type: url
    pointer: true
  - name: KeyBook
    type: url
    pointer: true
  - name: ManagerKeyBook
    type: url
    pointer: true
  - name: AuthDisabled
    description: allows any key to sign for the main key book
    type: bool

UnknownAccount:
  union: { type: account, value: Unknown }
  embeddings:
  - AccountHeader

LiteTokenAccount:
  union: { type: account, value: LiteTokenAccount }
  embeddings:
  - AccountHeader
  fields:
    - name: TokenUrl
      type: url
      pointer: true
    - name: Balance
      type: bigint
    - name: LastUsedOn
      type: uvarint
      alternative: Nonce
    - name: CreditBalance
      type: uvarint

LiteDataAccount:
  union: { type: account, value: LiteDataAccount }
  embeddings:
    - AccountHeader
  fields:
    - name: Tail
      type: bytes

ADI:
  union: { type: account, value: Identity }
  embeddings:
    - AccountHeader
  fields: [ ]

TokenAccount:
  union: { type: account, value: TokenAccount }
  embeddings:
  - AccountHeader
  fields:
    - name: TokenUrl
      type: url
      pointer: true
    - name: Balance
      type: bigint
    - name: Scratch
      type: bool
      optional: true

KeyPage:
  union: { type: account }
  embeddings:
  - AccountHeader
  fields:
    - name: CreditBalance
      type: uvarint
    - name: Threshold
      type: uvarint
    - name: Version
      type: uvarint
    - name: Keys
      repeatable: true
      type: KeySpec
      pointer: true
      marshal-as: reference
    - name: TransactionBlacklist
      type: AllowedTransactions
      marshal-as: enum
      pointer: true
      optional: true

KeyBook:
  union: { type: account }
  embeddings:
  - AccountHeader
  fields:
    - name: PageCount
      type: uvarint

DataAccount:
  union: { type: account, value: DataAccount }
  embeddings:
  - AccountHeader
  fields:
    - name: Scratch
      type: bool
      optional: true

TokenIssuer:
  union: { type: account }
  embeddings:
  - AccountHeader
  fields:
    - name: Symbol
      type: string
    - name: Precision
      type: uvarint
    - name: Properties
      type: url
      pointer: true
    - name: Issued
      type: bigint
    - name: SupplyLimit
      type: bigint
      pointer: true
      optional: true

Anchor:
  union: { type: account }
  embeddings:
  - AccountHeader
  fields: [ ]

##### Data Types #####

KeySpec:
  fields:
    - name: PublicKeyHash
      type: bytes
      alternative: PublicKey
    - name: LastUsedOn
      type: uvarint
      alternative: Nonce
    - name: Owner
      type: url
      pointer: true

LiteIdentity:
  union: { type: account }
  embeddings:
  - AccountHeader
  fields: [ ]

