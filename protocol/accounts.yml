# Accounts - names should be nouns

UnknownAccount:
  union: { type: account, value: Unknown }
  fields:
    - name: Url
      type: url
      pointer: true

LiteIdentity:
  union: { type: account }
  fields:
    - name: Url
      type: url
      pointer: true

LiteTokenAccount:
  union: { type: account, value: LiteTokenAccount }
  fields:
    - name: Url
      type: url
      pointer: true
    - name: TokenUrl
      type: url
      pointer: true
    - name: Balance
      type: bigint
    - name: LastUsedOn
      type: uvarint
      alternative: Nonce
    - name: CreditBalance
      type: uvarint

LiteDataAccount:
  union: { type: account, value: LiteDataAccount }
  fields:
    - name: Url
      type: url
      pointer: true
    - name: Tail
      type: bytes

ADI:
  union: { type: account, value: Identity }
  fields:
    - { name: KeyBook, type: url, pointer: true, virtual: true, non-binary: true }
    - { name: ManagerKeyBook, type: url, pointer: true, virtual: true, non-binary: true }
    - name: Url
      type: url
      pointer: true
    - type: AccountAuth
      marshal-as: reference

TokenAccount:
  union: { type: account, value: TokenAccount }
  fields:
    - { name: KeyBook, type: url, pointer: true, virtual: true, non-binary: true }
    - { name: ManagerKeyBook, type: url, pointer: true, virtual: true, non-binary: true }
    - name: Url
      type: url
      pointer: true
    - type: AccountAuth
      marshal-as: reference
    - name: TokenUrl
      type: url
      pointer: true
    - name: Balance
      type: bigint
    - name: Scratch
      type: bool
      optional: true

KeyBook:
  union: { type: account }
  fields:
    - { name: KeyBook, type: url, pointer: true, virtual: true, non-binary: true }
    - { name: ManagerKeyBook, type: url, pointer: true, virtual: true, non-binary: true }
    - name: Url
      type: url
      pointer: true
    - type: AccountAuth
      marshal-as: reference
    - name: PageCount
      type: uvarint

KeyPage:
  union: { type: account }
  fields:
    # Key pages do not have their own auth. They are subordinate to the key book
    # they are part of.
    - { name: KeyBook, type: url, pointer: true, virtual: true, non-binary: true }
    - name: Url
      type: url
      pointer: true
    - name: CreditBalance
      type: uvarint
    - name: Threshold
      type: uvarint
    - name: Version
      type: uvarint
    - name: Keys
      repeatable: true
      type: KeySpec
      pointer: true
      marshal-as: reference
    - name: TransactionBlacklist
      type: AllowedTransactions
      marshal-as: enum
      pointer: true
      optional: true

DataAccount:
  union: { type: account, value: DataAccount }
  fields:
    - { name: KeyBook, type: url, pointer: true, virtual: true, non-binary: true }
    - { name: ManagerKeyBook, type: url, pointer: true, virtual: true, non-binary: true }
    - name: Url
      type: url
      pointer: true
    - type: AccountAuth
      marshal-as: reference
    - name: Scratch
      type: bool
      optional: true

TokenIssuer:
  union: { type: account }
  fields:
    - { name: KeyBook, type: url, pointer: true, virtual: true, non-binary: true }
    - { name: ManagerKeyBook, type: url, pointer: true, virtual: true, non-binary: true }
    - name: Url
      type: url
      pointer: true
    - type: AccountAuth
      marshal-as: reference
    - name: Symbol
      type: string
    - name: Precision
      type: uvarint
    - name: Properties
      type: url
      pointer: true
    - name: Issued
      type: bigint
    - name: SupplyLimit
      type: bigint
      pointer: true
      optional: true

Anchor:
  union: { type: account }
  fields:
    - name: Url
      type: url
      pointer: true
    - type: AccountAuth
      marshal-as: reference
