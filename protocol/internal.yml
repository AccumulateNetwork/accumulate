# Types used internally by the governor and executor


##### Accounts #####

InternalLedger:
  union: { type: account }
  embeddings:
    - AccountHeader
  fields:
    - name: Index
      type: varint
    - name: Timestamp
      type: time
    - name: Synthetic
      type: SyntheticLedger
      marshal-as: reference
    - name: PendingOracle
      type: uvarint
    - name: ActiveOracle
      type: uvarint

InternalSyntheticLedger:
  union: { type: account }
  embeddings:
    - AccountHeader
  fields: []

##### Transactions #####

InternalGenesis:
  union: { type: transaction }

InternalSendTransactions:
  union: { type: transaction }
  incomparable: true
  fields:
    - name: Transactions
      repeatable: true
      type: SendTransaction
      marshal-as: reference

InternalTransactionsSigned:
  union: { type: transaction }
  fields:
    - name: Transactions
      repeatable: true
      type: TransactionSignature
      marshal-as: reference

InternalTransactionsSent:
  union: { type: transaction }
  fields:
    - name: Transactions
      type: chain
      repeatable: true

##### Data Types #####

SyntheticLedger:
  fields:
    - name: Nonce
      type: uvarint
    # - name: Produced
    #   type: chain
    #   repeatable: true
    - name: Unsigned
      type: chain
      repeatable: true
    - name: Unsent
      type: chain
      repeatable: true

SendTransaction:
  incomparable: true
  fields:
    - name: Payload
      type: TransactionBody
      marshal-as: value
      zero-value: nil
      unmarshal-with: UnmarshalTransaction
    - name: Recipient
      type: url
      pointer: true

TransactionSignature:
  fields:
    - name: Transaction
      type: chain
    - name: Signature
      type: Signature
      marshal-as: value
      zero-value: nil
      unmarshal-with: UnmarshalSignature

SyntheticLedgerEntry:
  description: contains the information needed to produce a receipt for a synthetic transaction that was produced in some block
  fields:
    - name: TransactionHash
      type: chain
      description: is the hash of the synthetic transaction
    - name: RootAnchor
      type: chain
      description: is the anchor of the root chain from the block
    - name: SynthIndex
      type: uint
      description: is the index of the transaction in the synthetic transaction chain
    - name: SynthIndexIndex
      type: uint
      description: is the index of the synthetic transaction index chain entry from the block
    - name: RootIndexIndex
      type: uint
      description: is the index of the root index chain entry from the block