# User transaction bodies

CreateIdentity:
  union: { type: transaction }
  fields:
    - name: Url
      type: url
      pointer: true
    - name: KeyHash
      type: bytes
      optional: true
    - name: KeyBookUrl
      description: creates a new key book
      type: url
      pointer: true
      optional: true
    # name: Manager
    - name: Authorities
      description: is a list of authorities to add to the authority set, in addition to the new key book
      field-number: 6
      type: url
      pointer: true
      repeatable: true
      optional: true

CreateTokenAccount:
  union: { type: transaction }
  fields:
    - name: Url
      type: url
      pointer: true
    - name: TokenUrl
      type: url
      pointer: true
    # name: KeyBookUrl
    - name: Scratch
      field-number: 5
      type: bool
      optional: true
    # name: Manager
    - name: Authorities
      description: is a list of authorities to add to the authority set
      field-number: 7
      type: url
      pointer: true
      repeatable: true
      optional: true
    - name: TokenIssuerProof
      type: AccountStateProof
      marshal-as: reference
      pointer: true
      optional: true
   

SendTokens:
  union: { type: transaction }
  fields:
    - name: Hash
      type: chain
      optional: true
    - name: Meta
      type: rawJson
      optional: true
    - name: To
      repeatable: true
      type: TokenRecipient
      marshal-as: reference
      pointer: true

CreateDataAccount:
  union: { type: transaction }
  fields:
    - name: Url
      type: url
      pointer: true
    # name: KeyBookUrl
    # name: ManagerKeyBookUrl
    - name: Scratch
      field-number: 5
      type: bool
      optional: true
    - name: Authorities
      description: is a list of authorities to add to the authority set
      type: url
      pointer: true
      repeatable: true
      optional: true

WriteData:
  union: { type: transaction }
  fields:
    - name: Entry
      type: DataEntry
      marshal-as: reference
    - name: Scratch
      type: bool
      optional: true

WriteDataTo:
  union: { type: transaction }
  fields:
    - name: Recipient
      type: url
      pointer: true
    - name: Entry
      type: DataEntry
      marshal-as: reference

AcmeFaucet:
  union: { type: transaction }
  fields:
    - name: Url
      type: url
      pointer: true

CreateToken:
  union: { type: transaction }
  fields:
    - name: Url
      type: url
      pointer: true
    # name: KeyBookUrl
    - name: Symbol
      field-number: 4
      type: string
    - name: Precision
      type: uvarint
    - name: Properties
      type: url
      pointer: true
      optional: true
    - name: SupplyLimit
      type: bigint
      pointer: true
      optional: true
    # name: Manager
    - name: Authorities
      description: is a list of authorities to add to the authority set
      field-number: 9
      type: url
      pointer: true
      repeatable: true
      optional: true

IssueTokens:
  union: { type: transaction }
  fields:
    - name: Recipient
      type: url
      pointer: true
    - name: Amount
      type: bigint

BurnTokens:
  union: { type: transaction }
  fields:
    - name: Amount
      type: bigint

CreateKeyPage:
  union: { type: transaction }
  fields:
    - name: Keys
      repeatable: true
      type: KeySpecParams
      pointer: true
      marshal-as: reference
    # name: Manager

CreateKeyBook:
  union: { type: transaction }
  fields:
    - name: Url
      type: url
      pointer: true
    - name: PublicKeyHash
      type: bytes
    # name: Manager
    - name: Authorities
      description: is a list of authorities to add to the authority set, in addition to the key book itself
      field-number: 5
      type: url
      pointer: true
      repeatable: true
      optional: true

AddCredits:
  union: { type: transaction }
  fields:
    - name: Recipient
      type: url
      pointer: true
    - name: Amount
      type: bigint
    - name: Oracle
      type: uvarint
      optional: true

UpdateKeyPage:
  union: { type: transaction }
  fields:
    - name: Operation
      type: KeyPageOperation
      marshal-as: union
      repeatable: true

AccountStateProof:
  fields:
  - name: State
    type: Account
    marshal-as: union
  - name: Proof
    type: Receipt
    marshal-as: reference
    pointer: true


UpdateAccountAuth:
  union: { type: transaction }
  fields:
    - name: Operations
      type: AccountAuthOperation
      marshal-as: union
      repeatable: true
    - name: TokenIssuerProof
      type: AccountStateProof
      marshal-as: reference
      pointer: true
      optional: true

AddValidator:
  union: { type: transaction }
  fields:
    - name: PubKey
      type: bytes
    - name: Owner
      description: reserved for future use
      type: url
      pointer: true
      optional: true

RemoveValidator:
  union: { type: transaction }
  fields:
    - name: PubKey
      type: bytes
    - name: Owner
      description: reserved for future use
      type: url
      pointer: true
      optional: true

UpdateValidatorKey:
  union: { type: transaction }
  fields:
    - name: PubKey
      type: bytes
    - name: NewPubKey
      type: bytes

UpdateKey:
  union: { type: transaction }
  fields:
    - name: NewKeyHash
      type: bytes

RemoteTransaction:
  union: { type: transaction }
  fields:
    - name: Hash
      type: hash
      optional: true
