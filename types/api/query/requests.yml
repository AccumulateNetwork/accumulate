UnknownRequest:
  union: { name: request, type: query }

RequestByUrl:
  union: { name: request, type: query, value: Url }
  fields:
    - name: Url
      type: url
      pointer: true

RequestByChainId:
  union: { name: request, type: query, value: ChainId }
  fields:
    - name: ChainId
      type: hash

RequestByTxId:
  union: { name: request, type: query, value: TxId }
  fields:
    - name: TxId
      type: hash

RequestTxHistory:
  union: { name: request, type: query, value: TxHistory }
  fields:
    - name: Account
      type: url
      pointer: true
    - name: Start
      type: uint
    - name: Limit
      type: uint

RequestDirectory:
  union: { name: request, type: query, value: DirectoryUrl }
  fields:
    - name: Url
      type: url
      pointer: true
    - name: Start
      type: uint
    - name: Limit
      type: uint
    - name: ExpandChains
      type: bool

RequestDataEntry:
  union: { name: request, type: query, value: Data }
  fields:
    - name: Url
      type: url
      pointer: true
    - name: EntryHash
      type: chain
      optional: true

RequestDataEntrySet:
  union: { name: request, type: query, value: DataSet }
  fields:
    - name: Url
      type: url
      pointer: true
    - name: Start
      type: uvarint
    - name: Count
      type: uvarint
    - name: ExpandChains
      type: bool
      optional: true

RequestKeyPageIndex:
  union: { name: request, type: query, value: KeyPageIndex }
  fields:
    - name: Url
      type: url
      pointer: true
    - name: Key
      type: bytes

RequestMinorBlocks:
  union: { name: request, type: query, value: MinorBlocksByUrl }
  fields:
    - name: Ranges
      type: Range
      repeatable: true
      marshal-as: reference
    - name: TxFetchMode
      type: TxFetchMode
      marshal-as: enum
    - name: BlockFilterMode
      type: BlockFilterMode
      marshal-as: enum
    - name: EnableAnchorLookups
      type: bool

RequestSynth:
  union: { name: request, type: query, value: Synth }
  fields:
    - name: Source
      type: url
      pointer: true
    - name: Destination
      type: url
      pointer: true
    - name: SequenceNumber
      type: uint

Range:
  fields:
    - name: Start
      type: uvarint
    - name: Count
      type: uvarint
